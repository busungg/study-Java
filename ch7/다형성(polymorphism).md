# 다형성이란?

객체지향개념에서 다형성이란 '여러 가지 형태를 가질 수 있는 능력'을 의미하며, 자바에서는 한 타입의 참조변수로 여러 타입의 객체를 참조할 수 있도록 함으로써 다형성을 프로그램적으로 구현하였다.  
**_즉 조상클래스 타입의 참조변수로 자손클래스의 인스턴스를 참조할 수 있도록 하였다_** 는 것이다.

예시

```
    class Tv {
        boolean power;
        int channel;

        void power() {
            power = !power;
        }

        void channelUp() {
            ++channel;
        }

        void channelDown() {
            --channel;
        }
    }

    class CaptionTv extends Tv {
        String text;
        void caption() {}
    }
```

```
    |-----------------------------CaptionTv-----------------------------|
    |                                                                   |
    |   |-Tv-----------------------------------------|                  |
    |   |  power()  power  channelUp()               |      text        |
    |   |  channel  channelDown()                    |     caption()    |
    |   |--------------------------------------------|                  |
    |                                                                   |
    |-------------------------------------------------------------------|
```

Tv와 CaptionTv 클래스가 서로 상속관계에 있을 경우, 다음과 같이 조상 클래스 타입의 참조변수로 자손 클래스의 인스턴스를 참조하도록 하는 것도 가능하다.

```
    Tv t = new CaptionTv(); //조상 타입의 참조변수로 자손 인스턴스를 참조
```

Tv타입의 참조변수로는 CaptionTv 인스턴스 중에서 Tv 클래스의 멤버들(상속받은 멤버포함)만 사용할 수 있다.

> 조상타입의 참조변수로 자손타입의 인스턴스를 참조할 수 있다.  
> 반대로 자손타입의 참조변수로 조상타입의 인스턴스를 참조할 수는 없다.

# 참조변수의 형변환

서로 상속관계에 있는 클래스사이에서만 형변환이 가능하다. 그래서 자손타입의 참조변수를 조상타입의 참조변수로, 조상타입의 참조변수를 자손타입의 참조변수로의 형변환만 가능하다.

> - 자손타입 => 조상타입(up-casting) : 형변환 생략가능
> - 자손타입 <= 조상타입(down-casting) : 형변환 생략불가

**_참조변수가 다룰 수 있는 멤버의 개수가 실제 인스턴스가 갖고 있는 멤버의 개수보다 적을 것이 분명하면 형변환을 생략할 수 있다._**

**_형변환은 참조변수의 타입을 변환하는 것이지 인스턴스를 변환하는 것은 아니기 때문에 참조변수의 형변환은 인스턴스에 아무런 영향을 미치지 않는다.  
단지 참조변수의 형변환을 통해서, 참조하고 있는 인스턴스에서 사용할 수 있는 멤버의 범위(개수)를 조절하는 것뿐이다._**

# instanceof 연산자

참조변수가 참조하고 있는 인스턴스의 실제 타입을 알아보기 위해 instanceof연산자를 사용한다.  
주로 조건문에 사용되며, instanceof의 왼쪽에는 참조변수를 오른쪽에는 타입(클래스명)이 피연선자로 위치한다.  
그리고 연산의 결과로 boolean 값인 true와 flase 중의 하나를 반환한다.

# 참조변수와 인스턴스의 연결

조상 클래스에 선언된 멤버변수와 **_같은 이름의 인스턴스변수_** 를 자손 클래스에 중복으로 정의했을 때, 조상타입의 참조변수로 자손 인스턴스를 참조하는 경우와 자손타입의 참조변수로 자손 인스턴스를 참조하는 경우는 서로 다른 결과를 얻는다.  
메서드의 경우 조상 클래스의 메서드를 자손의 클래스에서 오버라이딩한 경우에도 참조 변수의 타입에 관계없이 항상 실제 인스턴스의 메서드(오버라이딩된 메서드)가 호출되지만, **_멤버변수의 경우 참조변수의 타입에 따라 달라진다._**
